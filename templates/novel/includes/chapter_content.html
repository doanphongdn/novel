{% load static %}

<div class="chapter-content">
    <div class="row chapter-actions">
        <div class="col-5">
            <div class="row">
                {% if chapter_prev_url %}
                    <a href="{{ chapter_prev_url }}">
                        <button type="button" class="btn btn-sm btn-default d-lg-none">
                            <i class="fa fa-chevron-left"></i> Prev
                        </button>
                        <button type="button" class="btn btn-default d-none d-lg-block">
                            <i class="fa fa-chevron-left"></i> Prev
                        </button>
                    </a>
                {% endif %}
            </div>
        </div>
        <div class="col-2">
            <div class="row justify-content-center">
                <button type="button" class="btn btn-sm btn-default d-lg-none" data-toggle="modal"
                        data-target="#modal-chapter">
                    <i class="fa fa-list"></i>
                </button>
                <button type="button" class="btn btn-default d-none d-lg-block" data-toggle="modal"
                        data-target="#modal-chapter">
                    <i class="fa fa-list"></i> Chapter List
                </button>
            </div>
        </div>
        <div class="col-5">
            <div class="row justify-content-end">
                {% if chapter_next_url %}
                    <a href="{{ chapter_next_url }}">
                        <button type="button" class="btn btn-sm btn-default d-lg-none">
                            Next <i class="fa fa-chevron-right"></i>
                        </button>
                        <button type="button" class="btn btn-default d-none d-lg-block">
                            Next <i class="fa fa-chevron-right"></i>
                        </button>
                    </a>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="row chapter-header">
        <div class="col-12 chapter-title">
            <h3>{{ novel.name }}</h3>
            <h5>{{ chapter.name }}</h5>
        </div>
    </div>
    <hr class="hr-light">
    <div class="row chapter-detail">
        <div class="col-12">
            {% autoescape off %}
                {{ chapter.decompress_content }}
            {% endautoescape %}
            {% if cdn_images %}
              {% for cdn_image in cdn_images %}
                {% if forloop.counter <= 3 %}
                    <img src="{{ cdn_domain }}/{{ cdn_image }}" alt="">
                {% else %}
                    <img data-src="{{ cdn_domain }}{{ cdn_image }}" src="{% static "images/lazyload.gif" %}" alt=""
                         class="lazyload">
                {% endif %}
              {% endfor %}
            {% endif %}
            {% for image_url in stream_images %}
                {% if forloop.counter > cdn_images|length and forloop.counter <= cdn_images|length|add:"2" %}
                    <img src="{{ image_url }}" alt="">
                {% elif forloop.counter > cdn_images|length|add:"2" %}
                    <img data-src="{{ image_url }}" src="{% static "images/lazyload.gif" %}" alt=""
                         class="lazyload">
                {% endif %}
            {% endfor %}
        </div>
    </div>
    <hr class="hr-text" data-content="END CHAPTER">
    {% if chapter.next_chapter %}
        <div class="col-12 chapter-hashtags">
            <a href="{{ chapter_next_url }}" class="btn btn-sm btn-warning"
               title="{{ novel.name }} {{ chapter_next_name }}">{{ novel.name }} {{ chapter_next_name }}</a>
        </div>
    {% endif %}
</div>

<div class="modal fade modal-chapter" id="modal-chapter" tabindex="-1" role="dialog" aria-labelledby="modal-chapter"
     aria-hidden="true">
    <div class="modal-dialog modal- modal-dialog-centered modal-" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">Ã—</span>
                </button>
            </div>
            <div class="modal-body" id="chapter-list">
                <ul>
{#                    {% for chap in novel.chapters %}#}
{#                        <li>#}
{#                            <a href="{% if chapter == chap %}#current{% else %}{{ chap.get_absolute_url }}{% endif %}">{{ chap.name }}</a>#}
{#                        </li>#}
{#                    {% endfor %}#}
                </ul>
            </div>
        </div>
    </div>
</div>
